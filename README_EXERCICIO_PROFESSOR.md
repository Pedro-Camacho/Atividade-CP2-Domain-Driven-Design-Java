# Desafio: Cadastro de **Professores** (Spring Boot + Oracle JDBC)

> Projeto-base: `restapi` (mesma arquitetura do cadastro de **Alunos**).  
> Objetivo: os(as) alunos(as) devem implementar **CRUD de Professores** reutilizando a arquitetura em camadas (Controller ‚Üí Service ‚Üí Repository ‚Üí Oracle).

---

## ‚úÖ Entreg√°veis
1. **Model `Professor`** (`id`, `nome`, `departamento`, `email`, `titulacao`).
2. **Repository `ProfessorRepository`** com JDBC puro (usando `ConnectionFactory`) e m√©todos:  
   - `Professor adicionar(Professor p)`  
   - `Optional<Professor> buscarPorId(Long id)`  
   - `List<Professor> listar()`  
   - `Optional<Professor> atualizar(Long id, Professor p)`  
   - `boolean deletar(Long id)`
3. **Service `ProfessorService`** com regras de valida√ß√£o e orquestra√ß√£o.
4. **Controller `ProfessorController`** expondo endpoints REST em `/api/professores`.
5. **Script SQL Oracle** para tabela `PROFESSOR`.

---

## üì¶ Estrutura de pacotes (sugest√£o)

```
src/main/java/com/fiap/restapi/
 ‚îú‚îÄ model/
 ‚îÇ   ‚îú‚îÄ Aluno.java
 ‚îÇ   ‚îî‚îÄ Professor.java            ‚Üê (novo)
 ‚îú‚îÄ repository/
 ‚îÇ   ‚îú‚îÄ AlunoRepository.java
 ‚îÇ   ‚îî‚îÄ ProfessorRepository.java  ‚Üê (novo)
 ‚îú‚îÄ service/
 ‚îÇ   ‚îú‚îÄ AlunoService.java
 ‚îÇ   ‚îî‚îÄ ProfessorService.java     ‚Üê (novo)
 ‚îî‚îÄ controller/
     ‚îú‚îÄ AlunoController.java
     ‚îî‚îÄ ProfessorController.java  ‚Üê (novo)
```

> Conex√£o com o Oracle j√° est√° centralizada em `config/ConnectionFactory.java`.

---

## üóÇÔ∏è Modelo de Dados (Oracle)

Crie a tabela `PROFESSOR` (DDL):

```sql
-- script: script/createTable_Professor.sql
CREATE TABLE PROFESSOR (
    ID           NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME         VARCHAR2(150) NOT NULL,
    DEPARTAMENTO VARCHAR2(100) NOT NULL,
    EMAIL        VARCHAR2(150) NOT NULL,
    TITULACAO    VARCHAR2(80)
);

-- Regra de unicidade de e-mail
CREATE UNIQUE INDEX UK_PROFESSOR_EMAIL ON PROFESSOR(EMAIL);
```

> **Observa√ß√£o**: em Oracle, `IDENTITY` funciona em vers√µes 12c+; se n√£o dispon√≠vel no ambiente, substitua por `SEQUENCE + trigger`.

---

## üß© Regras de Neg√≥cio (valida√ß√µes m√≠nimas)

- `nome`: obrigat√≥rio, 
- `departamento`: obrigat√≥rio, 
- `email`: obrigat√≥rio, formato v√°lido, 
- `titulacao`: opcional, at√© `80`
- IDs devem ser `> 0` para opera√ß√µes de busca/atualiza√ß√£o/remo√ß√£o.

No `ProfessorService`:
- Aparar espa√ßos (`trim`) antes de persistir.
- Lan√ßar `IllegalArgumentException` para entradas inv√°lidas (mensagem clara).
- Mapear `Optional.empty()` para **404** no Controller quando aplic√°vel.

---

## üîå Endpoints REST (Controller)

Base path: `/api/professores`

| M√©todo | Rota                   | Descri√ß√£o                | HTTP Codes               |
|-------:|------------------------|--------------------------|--------------------------|
| POST   | `/api/professores`     | Cria professor           | 201 (Location), 400      |
| GET    | `/api/professores`     | Lista professores        | 200                      |
| GET    | `/api/professores/{id}`| Busca por ID             | 200, 404                 |
| PUT    | `/api/professores/{id}`| Atualiza professor       | 200, 400, 404            |
| DELETE | `/api/professores/{id}`| Remove professor         | 204, 404                 |

### Exemplos (cURL)
**Criar**
```bash
curl -X POST http://localhost:8080/api/professores   -H "Content-Type: application/json"   -d '{ "nome":"Ana Silva", "departamento":"Computa√ß√£o", "email":"ana@fiap.com", "titulacao":"Doutora" }'
```

**Atualizar**
```bash
curl -X PUT http://localhost:8080/api/professores/1   -H "Content-Type: application/json"   -d '{ "nome":"Ana C. Silva", "departamento":"Computa√ß√£o", "email":"ana@fiap.com", "titulacao":"Doutora" }'
```

---

## ‚úçÔ∏è Model (sugest√£o)

```java
// package com.fiap.restapi.model;
import lombok.AllArgsConstructor;
import lombok.Data;

@Data
@AllArgsConstructor
public class Professor {
    private Long id;
    private String nome;
    private String departamento;
    private String email;
    private String titulacao;
}
```

---

## üóÉÔ∏è Repository (assinaturas sugeridas)

```java
// package com.fiap.restapi.repository;
@Repository
public class ProfessorRepository {

    public Professor adicionar(Professor p) { /* INSERT + chave gerada */ }

    public Optional<Professor> buscarPorId(Long id) { /* SELECT WHERE ID=? */ }

    public List<Professor> listar() { /* SELECT ORDER BY ID */ }

    public Optional<Professor> atualizar(Long id, Professor p) { /* UPDATE WHERE ID=? */ }

    public boolean deletar(Long id) { /* DELETE WHERE ID=? */ }
}
```
## üß† Service (responsabilidades)

```java

@Service
public class ProfessorService {
    private final ProfessorRepository repo;

    public ProfessorService(ProfessorRepository repo) { this.repo = repo; }

    public Professor adicionar(String nome, String departamento, String email, String titulacao) {
        // validar + trim + delegar ao repo
    }

    public Optional<Professor> buscarPorId(Long id) { /* validar id + delegar */ }

    public List<Professor> listar() { /* delegar */ }

    public Optional<Professor> atualizar(Long id, String nome, String departamento, String email, String titulacao) {
        // validar entradas + delegar
    }

    public boolean deletar(Long id) { /* validar id + delegar */ }

    // private void validar(...)
}
```

Regras de valida√ß√£o centralizadas em m√©todos privados (`validarNome`, `validarEmail`, ...).

---

## üåê Controller (mapeamentos)

```java
@RestController
@RequestMapping("/api/professores")
public class ProfessorController {

    private final ProfessorService service;

    public ProfessorController(ProfessorService service) { this.service = service; }

    @PostMapping
    public ResponseEntity<Professor> criar(@RequestBody Professor dto) { /* 201 + Location */ }

    @GetMapping
    public List<Professor> listar() { /* 200 */ }

    @GetMapping("/{id}")
    public ResponseEntity<Professor> buscar(@PathVariable Long id) { /* 200/404 */ }

    @PutMapping("/{id}")
    public ResponseEntity<Professor> atualizar(@PathVariable Long id, @RequestBody Professor dto) { /* 200/400/404 */ }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deletar(@PathVariable Long id) { /* 204/404 */ }
}
```